﻿
@page "/userDetails"
@page "/userDetails/{id:int}"
@using Tescat.Services.UserCredentials;
@using Tescat.Services.Users;
@using Tescat.Models;
@using Tescat.Pages.Users.UserForms
@inject IUserService UserService
@inject IUserCredentialService UserCredentialService

<!-- Card de Informacion Basica -->
<FormSection Title="Informacíón Basica">
    <EditForm Model="@user">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="input1" class="form-label">Nombre Completo</label>
                        <InputText class="form-control" @bind-Value="user.Name"></InputText>
                    </div>

                    <div class="col-md-6">
                        <label for="input2" class="form-label">Departamento</label>
                        <InputSelect class="form-select" @bind-Value="departament"></InputSelect>
                       
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <input class="form-check-input" type="radio" name="radioGroup" id="radio1" value="option1" required>
                        <label class="form-check-label" for="radio1">Masculino</label>
                        <input class="form-check-input" type="radio" name="radioGroup" id="radio2" value="option2" required>
                        <label class="form-check-label" for="radio2">Femenino</label>
                    </div>

                </div>
                <div class="row g-3">
                    <div class="col-md-3">
                        <label for="input1" class="form-label">Fecha de Ingreso</label>
                        <select class="form-select" aria-label="Default select example">
                            <option selected>Selecciona una opcion</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="input2" class="form-label">-</label>
                        <select class="form-select" aria-label="Default select example">
                            <option selected>Selecciona una opcion</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="input3" class="form-label">-</label>
                        <select class="form-select" aria-label="Default select example">
                            <option selected>Selecciona una opcion</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="input4" class="form-label">Oficina</label>
                        <select class="form-select" aria-label="Default select example">
                            <option selected>Selecciona una opcion</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </div>

                </div>
                <div class="row g-3">
                    <div class="col-md-3">
                        <label for="input1" class="form-label">Puesto</label>
                        <InputSelect class="form-select" @bind-Value="user.Dept">
                            @foreach (var departament in departaments)
                            {
                                <option value="@departament">@departament</option>
                            }
                        </InputSelect>
                    </div>
                </div>

                <button class="btn btn-primary" type="submit">Enviar</button>
            </EditForm>
</FormSection>
            
<!-- Card de Informacion de Contacto -->
<FormSection Title="Información de Contacto">
    <EditForm Model="@user">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="input1" class="form-label">Extension</label>
                        <InputText class="form-control" @bind-Value="user.Tel"></InputText>
                    </div>

                    <div class="col-md-6">
                        <label for="input2" class="form-label">Numero de celular</label>
                        <InputText class="form-control" @bind-Value="cel"></InputText>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="input1" class="form-label">Correo(s)</label>
                        <InputSelect class="form-select" @bind-Value="email">

                        </InputSelect>
                    </div>
                </div>
            </EditForm>
</FormSection>
            

<!-- Card Cuentas de Usuario -->
<FormSection Title="Cuentas de Usuario">
    <EditForm Model="@user">
                @if (userCredential.PortalUser != null)
                {
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Usuario Portal</label>
                            <InputText class="form-control" @bind-Value="userCredential.PortalUser"></InputText>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Contraseña</label>
                            <InputText class="form-control" @bind-Value="userCredential.PortalPass"></InputText>
                        </div>
                    </div>
                }
                @if (userCredential.CasaUser != null)
                {
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Usuario Casa</label>
                            <InputText class="form-control" @bind-Value="userCredential.CasaUser"></InputText>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Contraseña</label>
                            <InputText class="form-control" @bind-Value="userCredential.CasaPass"></InputText>
                        </div>
                    </div>
                }
                @if (userCredential.MozartUser != null)
                {
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Usuario Casa</label>
                            <InputText class="form-control" @bind-Value="userCredential.MozartUser"></InputText>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Contraseña</label>
                            <InputText class="form-control" @bind-Value="userCredential.MozartPass"></InputText>
                        </div>
                    </div>
                }
                @if (userCredential.DarwinUser != null)
                {
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Usuario Casa</label>
                            <InputText class="form-control" @bind-Value="userCredential.DarwinUser"></InputText>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Contraseña</label>
                            <InputText class="form-control" @bind-Value="userCredential.DarwinPass"></InputText>
                        </div>
                    </div>
                }
                @if (userCredential.VpnUser != null)
                {
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Usuario Casa</label>
                            <InputText class="form-control" @bind-Value="userCredential.VpnUser"></InputText>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Contraseña</label>
                            <InputText class="form-control" @bind-Value="userCredential.VpnPass"></InputText>
                        </div>
                    </div>
                }

            </EditForm>
</FormSection>
            




@code {
    [Parameter]
    public int id { get; set; }

    private User user = new User();
    private UserCredential userCredential = new UserCredential();

    public string? cel;
    public string? email;
    public string? userPortal;
    public string? departament;


    protected override async Task OnInitializedAsync()
    {

        if (id != 0)
        {
            user = await UserService.GetUserId(id);
            userCredential = await UserCredentialService.GetUserCredentials(id);


        }

    }
    private List<string> departaments = new List<string>
    {
        "Trafico", "Impo. Temporal", "Impo. Definitiva", "Exportacion", "Sistemas", "Supervisor Administrativo",
        "Cobranza", "Facturacion/Exportacion", "Liberaciones", "Proveedores", "Contabilidad", "Captura", "Liberaciones/ Impo. Temporal", "Administracion", "Cuentas de Gastos"
    };

}
